<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TaxEasy_ZA – 5-Page 2025 Tax Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="South African personal income-tax calculator 2025 – 5 pages, multi-lingual, POPIA compliant">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/main.css">
</head>

<body>
<div class="container">
  <header>
    <h1>TaxEasy <span class="za">ZA</span></h1>
    <select id="langSelect" onchange="setLanguage(this.value)">
      <option value="en">English</option>
      <option value="af">Afrikaans</option>
      <option value="zu">isiZulu</option>
      <option value="xh">isiXhosa</option>
      <option value="st">Sesotho</option>
    </select>
  </header>

  <div class="progress-container">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <span id="progressText">Step 1 of 5</span>
  </div>

  <nav>
    <button class="nav-item active" onclick="showPage(1)">Personal</button>
    <button class="nav-item" onclick="showPage(2)">Income & IRP5</button>
    <button class="nav-item" onclick="showPage(3)">Deductions</button>
    <button class="nav-item" onclick="showPage(4)">Advanced</button>
    <button class="nav-item" onclick="showPage(5)">Calculation</button>
  </nav>

  <!-- PAGE 1 – PERSONAL -->
  <section id="page1" class="page active">
    <h2 data-translate="personal">Personal Information</h2>
    <div class="form-grid two">
      <label data-translate="fullName">Full Name
        <input type="text" id="fullName" data-tooltip="Your legal name as per ID/passport">
      </label>
      <label data-translate="age">Age
        <input type="number" id="age" min="18" max="120" data-tooltip="Used to determine tax rebates">
      </label>
    </div>
  </section>

  <!-- PAGE 2 – INCOME & IRP5 -->
  <section id="page2" class="page">
    <h2 data-translate="income">Income & IRP5 Information</h2>
    <div class="form-grid two">
      <label data-translate="basicSalary">
        Basic Salary (Code 3601)
        <span class="tooltip" data-tooltip="Annual basic salary amount from IRP5">?</span>
        <input type="number" id="basicSalary" step="0.01" data-tooltip="Annual basic salary">
      </label>
      <label data-translate="bonus">Bonus (Code 3605)
        <input type="number" id="bonus" step="0.01" data-tooltip="Annual performance bonus">
      </label>
      <label data-translate="commission">Commission (Code 3606)
        <input type="number" id="commission" step="0.01" data-tooltip="Commission earned">
      </label>
      <label data-translate="travelAllowance">Travel Allowance (Code 3701)
        <input type="number" id="travelAllowance" step="0.01" data-tooltip="Taxable travel allowance">
      </label>
    </div>
  </section>

  <!-- PAGE 3 – GENERAL DEDUCTIONS -->
  <section id="page3" class="page">
    <h2 data-translate="deductions">General Deductions</h2>
    <div class="form-grid two">
      <label data-translate="pension">Pension Fund Contributions
        <input type="number" id="pension" step="0.01" data-tooltip="Pension fund payments (27.5 % limit)">
      </label>
      <label data-translate="provident">Provident Fund Contributions
        <input type="number" id="provident" step="0.01" data-tooltip="Provident fund payments">
      </label>
      <label data-translate="ra">Retirement Annuity
        <input type="number" id="ra" step="0.01" data-tooltip="RA contributions">
      </label>
      <label data-translate="medicalAid">Medical Aid Contributions
        <input type="number" id="medicalAid" step="0.01" data-tooltip="Annual medical aid payments">
      </label>
    </div>
  </section>

  <!-- PAGE 4 – ADVANCED (OCCUPATION + RENEWABLE) -->
  <section id="page4" class="page">
    <h2 data-translate="advanced">Advanced Deductions</h2>
    <div class="form-grid two">
      <label data-translate="occupation">Occupation
        <select id="occupation" data-tooltip="SARS occupation type – affects allowable deductions">
          <option value="">-- Select --</option>
          <option value="IT Professional" data-tooltip="Includes software dev, network admin, etc.">IT Professional</option>
          <option value="Healthcare Worker" data-tooltip="Doctors, nurses, therapists">Healthcare Worker</option>
          <option value="Educator" data-tooltip="Teachers, lecturers, trainers">Educator</option>
          <option value="Engineer" data-tooltip="Civil, electrical, mechanical, mining">Engineer</option>
          <option value="Finance Professional" data-tooltip="Accountants, analysts, advisors">Finance Professional</option>
          <option value="Legal Professional" data-tooltip="Lawyers, paralegals, judges">Legal Professional</option>
          <option value="Sales & Marketing" data-tooltip="Reps, marketers, PR">Sales & Marketing</option>
          <option value="Trades & Technical" data-tooltip="Mechanics, electricians, technicians">Trades & Technical</option>
          <option value="Transport & Logistics" data-tooltip="Drivers, pilots, couriers">Transport & Logistics</option>
          <option value="Other" data-tooltip="Any occupation not listed above">Other</option>
        </select>
      </label>
      <label data-translate="solar">Solar Installation (§12B)
        <input type="number" id="solar" step="0.01" data-tooltip="Cost of home solar PV system – 100 % first-year allowance">
      </label>
      <label data-translate="businessKm">Business Kilometres
        <input type="number" id="businessKm" min="0" data-tooltip="Kilometres travelled for business (logbook required)">
      </label>
      <label data-translate="homeOffice">Home Office Expenses
        <input type="number" id="homeOffice" step="0.01" data-tooltip="Exclusive-use home office costs (portion of rent, rates, electricity, etc.)">
      </label>
    </div>
  </section>

  <!-- PAGE 5 – CALCULATION / PAYMENTS / PDF -->
  <section id="page5" class="page">
    <h2 data-translate="summary">Tax Summary</h2>
    <div class="summary-grid">
      <div class="summary-card">
        <span data-translate="grossTotal">Gross Income:</span>
        <span id="grossTotal">R 0.00</span>
      </div>
      <div class="summary-card">
        <span data-translate="taxableTotal">Taxable Income:</span>
        <span id="taxableTotal">R 0.00</span>
      </div>
      <div class="summary-card">
        <span data-translate="taxPayable">Tax Payable:</span>
        <span id="taxPayable">R 0.00</span>
      </div>
      <button class="premium-btn" onclick="downloadReport()" data-txt="downloadReport">
        Download Detailed Report (R99)
      </button>
      <div class="summary-card">
        <span data-translate="effectiveRate">Effective Rate:</span>
        <span id="effectiveRate">0.00%</span>
      </div>
    </div>

    <div class="btn-group">
      <button class="btn primary" onclick="generatePDF()" data-translate="generatePDF">Generate PDF</button>
      <button class="btn secondary" onclick="window.open('faq.html','_blank')" data-translate="faqBtn">FAQ</button>
      <button class="btn secondary" onclick="window.open('efiling-guide.html','_blank')" data-translate="efilingBtn">eFiling Guide</button>
    </div>
  </section>
</div>

<!-- =====  TOOLTIP CONTAINER  ===== -->
<div id="tooltip" class="tooltip" style="display:none;"></div>

<!-- =====  MINI JS  ===== -->
<script src="/js/app.js"></script>
<script>
/* ---------- Language texts ---------- */
const texts = {
  en:{
    personal:"Personal Information", income:"Income & IRP5 Information", deductions:"General Deductions",
    advanced:"Advanced Deductions", summary:"Tax Summary", fullName:"Full Name", age:"Age",
    basicSalary:"Basic Salary (Code 3601)", bonus:"Bonus (Code 3605)", commission:"Commission (Code 3606)",
    travelAllowance:"Travel Allowance (Code 3701)", pension:"Pension Fund", provident:"Provident Fund",
    ra:"Retirement Annuity", medicalAid:"Medical Aid Contributions", occupation:"Occupation",
    solar:"Solar Installation (§12B)", businessKm:"Business Kilometres", homeOffice:"Home Office Expenses",
    grossTotal:"Gross Income", taxableTotal:"Taxable Income", taxPayable:"Tax Payable",
    effectiveRate:"Effective Rate", generatePDF:"Generate PDF", faqBtn:"FAQ", efilingBtn:"eFiling Guide"
  },
  af:{/* Afrikaans omitted for brevity – same keys */},
  zu:{/* isiZulu omitted for brevity */},
  xh:{/* isiXhosa omitted for brevity */},
  st:{/* Sesotho omitted for brevity */}
};

/* ---------- Navigation ---------- */
let page = 1;
function showPage(n){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(b=>b.classList.remove('active'));
  document.getElementById('page'+n).classList.add('active');
  document.querySelectorAll('.nav-item')[n-1].classList.add('active');
  document.getElementById('progressFill').style.width = ((n-1)*25)+'%';
  document.getElementById('progressText').textContent = `Step ${n} of 5`;
  page=n;
}

/* ---------- Language ---------- */
function setLanguage(lang){
  document.querySelectorAll('[data-translate]').forEach(el=>{
    const key=el.dataset.translate;
    if(texts[lang] && texts[lang][key]) el.innerText = texts[lang][key];
  });
}
setLanguage('en');

/* ---------- Tooltip ---------- */
document.addEventListener('mouseover',e=>{
  if(e.target.dataset.tooltip){
    const tip=document.getElementById('tooltip');
    tip.textContent = e.target.dataset.tooltip;
    tip.style.display='block';
    tip.style.left = e.pageX+10+'px';
    tip.style.top = e.pageY+10+'px';
  }
});
document.addEventListener('mouseout',e=>{
  if(e.target.dataset.tooltip) document.getElementById('tooltip').style.display='none';
});

/* ---------- Simple tax calc (demo) ---------- */
function generatePDF(){
  const doc = new jsPDF();
  doc.text("TaxEasy_ZA 2025 Summary",20,20);
  doc.text("Gross Income: "+document.getElementById('grossTotal').innerText,20,30);
  doc.save("TaxEasy_ZA_Summary.pdf");
}

setTimeout(()=>showPage(1),0);
</script>
</body>
</html>
